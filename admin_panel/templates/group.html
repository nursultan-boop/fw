{% extends 'layout.html' %}

{% block content %}
<h2>Group: {{ group_name }}</h2>

<h3>Rules</h3>
<ul>
    {% for rule in group.rules %}
    <li>
        {{ rule }}
        <form action="{{ url_for('remove_rule', group_name=group_name, rule=rule) }}" method="post" style="display:inline;">
            <button type="submit">Remove</button>
        </form>
    </li>
    {% endfor %}
</ul>
<form action="{{ url_for('add_rule', group_name=group_name) }}" method="post">
    <input type="text" name="rule" placeholder="Enter new rule">
    <button type="submit">Add Rule</button>
</form>

<h3>Devices</h3>
<ul>
    {% for device_ip in group.devices %}
    <li>
        {{ device_ip }}
        <form action="{{ url_for('remove_device', group_name=group_name, device_ip=device_ip) }}" method="post" style="display:inline;">
            <button type="submit">Remove</button>
        </form>



    </li>
    {% endfor %}
</ul>
<form action="{{ url_for('add_device', group_name=group_name, device_ip=request.form.get('device_ip')) }}" method="post">
    <select name="device_ip">
        {% for device in devices %}
        <option value="{{ device.ip }}">{{ device.name }} ({{ device.ip }})</option>
        {% endfor %}
    </select>
    <button type="submit">Add Device</button>
</form>

{% if group_name != 'default' %}
<form action="{{ url_for('remove_group', group_name=group_name) }}" method="post">
    <button type="submit" onclick="return confirm('Are you sure you want to delete this group? All devices will be moved to the default group.');">Delete Group</button>
</form>
{% endif %}
{% endblock %}