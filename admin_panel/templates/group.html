{% extends 'layout.html' %}

{% block content %}
<h2>Group: {{ group_name }}</h2>

<h3>Rules</h3>
<ul>
    {% for rule in group.rules %}
    <li>
        {{ rule }}
        <form action="{{ url_for('remove_rule', group_name=group_name, rule=rule) }}" method="post" style="display:inline;">
            <button type="submit">Remove</button>
        </form>
    </li>
    {% endfor %}
</ul>
<form action="{{ url_for('add_rule', group_name=group_name) }}" method="post">
    <label for="rule_type">Rule Type:</label>
    <select name="rule_type">
        <option value="Block IP">Block IP</option>
        <option value="Block Domain">Block Domain</option>
    </select>
    <input type="text" name="value" placeholder="IP or Domain">
    <button type="submit">Add Rule</button>
</form>

<h3>Devices in {{ group_name }}</h3>
<ul>
    {% for device_ip in group.devices %}
    <li>
        {{ devices[device_ip] if device_ip in devices else device_ip }}
        <form action="{{ url_for('remove_device', group_name=group_name, device_ip=device_ip) }}" method="post" style="display:inline;">
            <button type="submit">Remove from Group</button>
        </form>
    </li>
    {% endfor %}
</ul>

<h3>Add Device to {{ group_name }}</h3>
<form action="{{ url_for('add_device', group_name=group_name) }}" method="post">
    <select name="device_ip">
        {% for device in devices %}
        <option value="{{ device.ip }}">{{ device.name }} ({{ device.ip }})</option>
        {% endfor %}
    </select>
    <button type="submit">Add Device</button>
</form>

{% endblock %}
